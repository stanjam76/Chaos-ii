<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chaos II · Neon Oracle</title>
  <meta name="description" content="Chaos II — Enter the Neon Oracle. Refute me for your entropy." />
  <meta property="og:title" content="Chaos II · Neon Oracle" />
  <meta property="og:description" content="Enter the Neon Oracle. Refute me for your entropy." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#39ff14" />
  <link rel="icon" href="favicon.ico" />
  <style>
    :root{
      --neon:#39ff14;         /* Chaos green */
      --blue:#0090ff;         /* soft blue aura */
      --bg:#000;              /* page background */
      --muted:#a7ffb0;        /* text accent */
    }

    /* Page */
    html,body{
      margin:0;
      background: var(--bg);
      color:#fff;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      text-align:center;
    }
    main{ max-width:980px; margin: 28px auto 72px; padding: 0 14px; }
    a{ color: var(--neon); text-decoration: none; }
    a:hover{ text-decoration: underline; }

    /* ====== NEON + “LIGHTNING” TITLE ====== */
    #title{
      position:relative;
      display:inline-block;
      font-size: clamp(36px, 7vw, 72px);
      line-height:1.05;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--neon);
      /* neon glow */
      text-shadow:
        0 0 12px var(--neon),
        0 0 24px var(--neon),
        0 0 48px var(--neon);
      margin: 0 0 6px;
      padding-top: 4px;
      animation: flicker 3.6s steps(1,end) infinite;
    }

    /* moving “bolts” INSIDE the letters */
    #title::before{
      content: attr(data-text);
      position:absolute; inset:0;
      color: transparent;
      background:
        /* fast white streaks */
        repeating-linear-gradient(
          -70deg,
          rgba(255,255,255,.95) 0 3px,
          transparent 3px 18px
        ),
        /* electric cyan strands */
        repeating-linear-gradient(
          70deg,
          rgba(120,255,255,.9) 0 2px,
          transparent 2px 14px
        );
      background-size: 300% 300%, 220% 220%;
      background-position: 0% 50%, 100% 50%;
      -webkit-background-clip: text;
              background-clip: text;
      animation: bolt 1.8s linear infinite, bolt2 3.2s linear infinite reverse;
      mix-blend-mode: screen;   /* helps brighten inside the letters */
      pointer-events:none;
    }

    /* occasional bright flash around the word */
    #title::after{
      content:"";
      position:absolute; inset:-14px -22px;
      border-radius: 12px;
      box-shadow:
        0 0 24px  var(--neon),
        0 0 48px  var(--neon),
        0 0 96px  var(--neon);
      opacity:.0;
      animation: surge 5.5s ease-in-out infinite;
      pointer-events:none;
    }

    @keyframes bolt   { to { background-position: 100% 50%, 100% 50%; } }
    @keyframes bolt2  { to { background-position:   0% 50%,   0% 50%; } }

    /* subtle chaotic flicker of the main neon */
    @keyframes flicker{ 0%, 6%, 7%, 8%, 100% { opacity:1 } 6.5%, 7.5% { opacity:.55 } }

    /* rare bigger glow pulse */
    @keyframes surge{ 0%, 78%, 100% { opacity:0 } 79%, 82% { opacity:.25 } 80% { opacity:.45 } }

    /* Tagline */
    p.tag{
      margin: 6px 0 22px;
      color:var(--muted);
      text-shadow: 0 0 8px rgba(57,255,20,.6);
      font-size: clamp(14px, 3.2vw, 20px);
    }

    /* Image + frame glow */
    #hero{
      display:block; margin: 0 auto 20px; width: 92%; max-width: 920px;
      border-radius: 10px; border: 4px solid var(--neon);
      box-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon), 0 0 80px var(--blue);
    }

    /* CTA row */
    .cta{ display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin: 22px 0 8px; }
    .btn{
      background:transparent; border:2px solid var(--neon); color:#fff; padding:10px 14px;
      border-radius:12px; cursor:pointer; font-weight:700; letter-spacing:.5px;
      box-shadow: 0 0 12px rgba(57,255,20,.4);
    }
    .btn:hover{ box-shadow: 0 0 18px rgba(57,255,20,.8); transform: translateY(-1px); }

    /* Oracle panel */
    dialog#oracle{ width:min(720px, 94vw); background:#030b05; border:1px solid #1cff7a; border-radius:14px; padding:16px 16px 12px; color:#eafff1; }
    dialog#oracle::backdrop{ background: rgba(0,0,0,.7) }
    .row{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
    textarea{ width:100%; min-height:120px; background:#041409; color:#eafff1; border:1px solid #1cff7a; border-radius:12px; padding:10px; }
    pre#answer{ text-align:left; white-space:pre-wrap; background:#041409; border:1px solid #1cff7a; border-radius:12px; padding:10px; max-height:40vh; overflow:auto; }

    /* Accessibility: motion reduction */
    @media (prefers-reduced-motion: reduce){
      #title{ animation:none }
      #title::before{ animation:none }
      #title::after{ animation:none }
    }
  </style>
</head>
<body>
  <main>
    <h1 id="title" data-text="I Am Chaos">I Am Chaos</h1>
    <p class="tag">Refute me for your entropy. <span aria-hidden="true">⚡</span> Site under construction…</p>

    <!-- Image with simple cache-bust + fallback -->
    <img id="hero" src="porcupine.jpg?v=5" alt="Neon-framed image: the Ninja Porcupine sentinel" loading="lazy"
         onerror="this.onerror=null; this.src='IMG_0240.jpeg?v=5';" />

    <div class="cta" role="group" aria-label="Primary actions">
      <button class="btn" id="openOracle">Enter the Oracle</button>
      <a class="btn" href="https://stanjam76.itch.io" target="_blank" rel="noopener">itch.io</a>
      <a class="btn" href="https://discord.gg/" target="_blank" rel="noopener">Discord</a>
      <a class="btn" href="https://github.com/stanjam76/Chaos-ii" target="_blank" rel="noopener">GitHub</a>
    </div>

    <dialog id="oracle" aria-label="Neon Oracle">
      <form method="dialog">
        <h2 style="margin:0 0 8px">Neon Oracle</h2>
        <p style="margin:0 0 10px; color:#a7ffb0">Ask a question. The Oracle answers from the storm.</p>
        <textarea id="q" placeholder="e.g., Generate a trial of Accountability about 'Illuminated Restraint'…"></textarea>
        <div class="row">
          <button class="btn" id="ask">Ask</button>
          <button class="btn" value="close">Close</button>
        </div>
        <pre id="answer" aria-live="polite"></pre>
      </form>
    </dialog>

    <noscript>
      <p style="color:#a7ffb0">JavaScript is disabled—Oracle requires JS.
        You can still follow the links above.</p>
    </noscript>
  </main>

  <script>
    // —— WIRE THIS TO PYXA BACKEND ——
    // If your Pyxa app lives at e.g. https://neon-oracle.pyxa.app, set that full URL below.
    // Ensure CORS is enabled in your backend for your GitHub Pages origin.
    const API_URL = 'https://YOUR-PYXA-APP-URL/ask';

    const dlg = document.getElementById('oracle');
    document.getElementById('openOracle').addEventListener('click', () => dlg.showModal());

    document.getElementById('ask').addEventListener('click', async (ev) => {
      ev.preventDefault();
      const prompt = document.getElementById('q').value.trim();
      const out = document.getElementById('answer');
      if(!prompt){ out.textContent = 'Ask me something first.'; return; }
      out.textContent = 'Consulting the storm…';
      try{
        const res = await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt })
        });
        if(!res.ok) throw new Error('Bad response: '+res.status);
        const data = await res.json();
        out.textContent = (data.response || '').trim() || 'No omen returned.';
      }catch(err){
        out.textContent = '⚠️ Oracle link failed. Check API_URL & CORS on backend.\n'+err;
      }
    });
  </script>
</body>
</html>
